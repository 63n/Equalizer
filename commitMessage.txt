Clean up data stream code:
- always funnel instance packets through session cache
- Clean up and document packets header code for the three cases sending
  instance data (send-on-register, commit, map)

[ ] May break build
[ ] May break existing applications (see CHANGES.txt)
[ ] Bugfix
[ ] New Feature
[x] Cleanup
[x] Optimization
[ ] Documentation
